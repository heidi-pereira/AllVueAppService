
<h1 id="{{=data.title_prefix}}">{{=data.api.info && data.api.info.title}} {{=data.version}}</h1>

> Scroll down for {{? data.header.language_tabs.length}}code samples, {{?}}example requests and responses.{{? data.header.language_tabs.length}} Select a language for code samples from the tabs above or the mobile navigation menu.{{?}}

{{? data.api.info && data.api.info.termsOfService}}<a href="{{=data.api.info.termsOfService}}">Terms of service</a>{{?}}
{{? data.api.info && data.api.info.contact}}{{? data.api.info.contact.email}}Email: <a href="mailto:{{=data.api.info.contact.email}}">{{=data.api.info.contact.name || 'Support'}}</a> {{?}}{{? data.api.info.contact.url}}Web: <a href="{{=data.api.info.contact.url}}">{{= data.api.info.contact.name || 'Support'}}</a> {{?}}{{?}}
{{? data.api.info && data.api.info.license}}{{? data.api.info.license.url}}License: <a href="{{=data.api.info.license.url}}">{{=data.api.info.license.name}}</a>{{??}} License: {{=data.api.info.license.name}}{{?}}{{?}}


# Endpoint definitions

> **Choose your preferred programming language tab at the top (or the nav menu on mobile).**

{{? data.api.info && data.api.info.description}}{{=data.api.info.description}}{{?}}

{{? data.api.servers }}

Base URL: {{~data.api.servers :s}}{{?data.api.servers.length > 1}}
<!-- base-url-followed-by-variables used by replace_variables.js -->
* {{?}}<a id="base-url-followed-by-variables" href="{{=s.url}}">{{=s.url}}</a>
  {{ for(var v in s.variables) { }}
  * **{{=v}}** - {{=s.variables[v].description||''}} Default: {{=s.variables[v].default}}
  {{? s.variables[v].enum}}
  {{~ s.variables[v].enum :e}}
    * {{= e}}
  {{~}}
  {{?}}
  {{ } }}
{{~}}

## Rate limiting & thresholds

After receiving a [429 'too many requests'](#status-and-error-codes) status code clients should wait 5 seconds before sending the next request.

This will generally only happen if the client:
* Repeatedly requests large amounts of survey responses for the same dates - these should be cached/stored since they don't change
* Repeatedly querying non-existent survey response dates - see the [/api/surveysets/{surveyset}](#get-surveyset-detail) endpoint for which dates have data
* Making many requests in parallel - there should be no need for this if caching responses appropriately

Some endpoints limit the maximum number of data points they return. In this case a [400 'bad request'](#status-and-error-codes) status code will inform you of the limit.
If this happens, make a more specific request that will return fewer data points.

{{?}}

{{ var allMethods = []; }}
{{ for (var rKey in data.resources) { }}
{{ var r = data.resources[rKey]; }}
{{ for (var mKey in r.methods) { }}
{{ var methodResource = {method: r.methods[mKey], methodUniqueName: mKey, resource: r }; }}
{{ allMethods.push(methodResource); }}
{{ } /* of methods */ }}
{{ } /* of resources */ }}

{{ allMethods = allMethods.sort(function(xObj, yObj){ }}
{{ var x = xObj.method.path, y = yObj.method.path; }}
{{ return ((x < y) ? -1 : ((x > y) ? 1 : 0)); }}
{{	}); }}

{{ for (var methodResource of allMethods) { }}
	{{ data.resource = methodResource.resource; }}
	{{ data.operationUniqueName = methodResource.methodUniqueName; }}
	{{ data.method = methodResource.method; }}
	{{ data.operationUniqueSlug = data.method.slug; }}
	{{ data.operation = data.method.operation; }}
	{{= data.templates.operation(data) }}
{{ } /* of allMethods */ }}



{{? data.api.components && data.api.components.schemas }}
# Response object definitions

## Status and error codes

The API uses the following HTTP status codes:

Status Code | Message | Meaning 
---------- | ------- | -------
200 | OK | Successful request and response
400 | Bad request | Malformed parameters or other bad request. Your request is invalid
401 | Unauthorised | API key is invalid. Authorization has been denied for this request
403 | Forbidden | Not authorized to access this resource
404 | Resource not found | The specified resource could not be found
405 | Method not allowed | You are using an incorrect HTTP verb
406 | Not acceptable |  You requested an unsupported format, try json or csv instead
429 | Too many Requests |  See [rate limiting](#rate-limiting--amp--thresholds) for further information
500 | Internal server error |  We had a problem with our server. Please try again later
503 | Service unavailable |  We're temporarily offline for maintenance. Please try again later


<h2 id="tocS{{='ApiResponse'}}">ApiResponse</h2>

```json
{{= '{' }}
{{= '  "value": "object"' }}
{{= '}' }}
```

#### Properties
Name | Type | Required | Restrictions | Description
--- | --- | --- | --- | ---
value | object | false | none | An object that has been wrapped by this response object

{{ for (var s in data.components.schemas) { }}
{{ if (s.includes("ApiResponseOf")) continue; }}
{{ var origSchema = data.components.schemas[s]; }}
{{ var schema = data.api.components.schemas[s]; }}
{{ var id = s.toLowerCase();}}
{{ if (schema.deprecated)  id = id + '_deprecated';}}


<h2 id="tocS{{=id}}">{{=s}}</h2>

<a id="schema{{=s.toLowerCase()}}"></a>

{{ if(schema.deprecated) { }}
<p>
	{{='&lt;span class="obsolete"&gt;DEPRECATED ' + (schema['x-deprecatedMessage'] ? '('+schema['x-deprecatedMessage']+')' : '') + ' &lt;/span&gt;'}}
</p>
{{ } }}


{{? data.options.yaml }}
```yaml
{{=data.utils.yaml.safeDump(data.utils.getSample(schema,data.options,{},data.api))}}
{{??}}
```json
{{=data.utils.safejson(data.utils.getSample(schema,data.options,{},data.api),null,2)}}
{{?}}
```

{{ var enums = []; }}
{{ var blocks = data.utils.schemaToArray(origSchema,-1,{trim:true,join:true},data); }}
{{ for (var block of blocks) {
for (var p of block.rows) {
if (p.schema && p.schema.enum) {
         for (var e of p.schema.enum) {
           enums.push({name:p.name,value:e});
         }
       }
     }
   }
}}

{{~ blocks :block}}
{{? block.title }}*{{= block.title}}*{{= '\n\n'}}{{?}}
{{? block.externalDocs}}
<a href="{{=block.externalDocs.url}}">{{=block.externalDocs.description||'External documentation'}}</a>
{{?}}

{{? block===blocks[0] }}

#### Properties
{{?}}

{{? block.rows.length}}|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|{{?}}
{{~ block.rows :p}}|{{=p.displayName}}|{{=p.safeType}}|{{=p.required}}|{{=p.restrictions||'none'}}|{{=p.description||'none'}}|
{{~}}
{{~}}
{{? (blocks[0].rows.length === 0) && (blocks.length === 1) }}
*None*
{{?}}

{{? enums.length > 0 }}
##### Enumerated Values

|Property|Value|
|---|---|
{{~ enums :e}}|{{=e.name}}|{{=data.utils.toPrimitive(e.value)}}|
{{~}}

{{?}}

{{ } /* of schemas */ }}

{{?}}

{{#def.footer}}

{{? data.options.discovery}}
{{#def.discovery}}
{{?}}
